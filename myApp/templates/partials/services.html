<section id="services" class="bg-gradient-to-b from-white via-beige-50 to-white py-24">
    <div class="mx-auto max-w-6xl px-6 md:px-12">
        <!-- Section header -->
        <div class="mx-auto max-w-3xl text-center">
            {% if content.services.badge %}
            <span class="inline-flex items-center rounded-full bg-navy-900/5 px-5 py-1.5 text-xs font-semibold uppercase tracking-[0.3em] text-navy-700">
                {{ content.services.badge }}
            </span>
            {% endif %}
            <h2 class="mt-4 text-4xl font-semibold tracking-tight text-navy-900 md:text-5xl">
                {{ content.services.title }}
            </h2>
            <p class="mt-6 text-lg leading-relaxed text-navy-700 md:text-xl">
                {{ content.services.description }}
            </p>
        </div>

        <!-- Layout -->
        <div class="mt-14 grid gap-10 lg:grid-cols-[minmax(0,1.3fr)_minmax(0,0.9fr)] lg:items-start">
            <!-- Services list -->
            <div class="space-y-5" id="services-accordion">
                {% for item in content.services.items %}
                <details class="service-accordion-item group relative overflow-hidden rounded-2xl border border-beige-200/80 bg-white/80 p-5 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md" {% if item.open %}open{% endif %}>
                    <!-- Accent bar -->
                    <span class="pointer-events-none absolute inset-y-0 left-0 w-1 bg-gradient-to-b from-navy-900 via-navy-700 to-navy-500 opacity-70"></span>

                    <summary class="flex cursor-pointer list-none items-center justify-between gap-4 pl-4 text-left">
                        <div class="flex items-center gap-4">
                            <span class="flex h-11 w-11 items-center justify-center rounded-full bg-navy-900 text-sm font-semibold uppercase tracking-[0.18em] text-white shadow-sm">
                                <i class="{{ item.icon }}"></i>
                            </span>
                            <div>
                                <p class="text-xs font-semibold uppercase tracking-[0.26em] text-navy-600">
                                    Service {{ forloop.counter|stringformat:"02" }}
                                </p>
                                <p class="mt-1 text-lg font-semibold text-navy-900">
                                    {{ item.title }}
                                </p>
                            </div>
                        </div>
                        <span class="flex h-9 w-9 flex-none items-center justify-center rounded-full border border-beige-200 bg-white text-navy-600 text-xs transition group-open:rotate-45">
                            <i class="fa-solid fa-plus"></i>
                        </span>
                    </summary>
                    <div class="mt-4 pl-4 pr-2 text-sm leading-relaxed text-navy-700 md:text-base">
                        {{ item.description }}
                    </div>
                </details>
                {% endfor %}
            </div>

            <!-- Image / luxury card -->
            <div class="relative">
                <div class="sticky top-24">
                    <div class="overflow-hidden rounded-[2rem] border border-beige-200/80 bg-white/60 shadow-xl backdrop-blur">
                        <div class="relative">
                            <img
                                src="{{ content.services.image.url }}"
                                alt="{{ content.services.image.alt }}"
                                class="h-[320px] w-full object-cover md:h-[380px] lg:h-[420px]"
                            >
                            <div class="pointer-events-none absolute inset-0 bg-gradient-to-t from-navy-950/55 via-navy-900/20 to-transparent"></div>

                            <div class="absolute inset-x-6 bottom-6 space-y-2 text-sm text-white">
                                <p class="text-xs font-semibold uppercase tracking-[0.28em] text-white/70">
                                    Signature Service Suite
                                </p>
                                <p class="text-lg font-semibold">
                                    Tailored marble & stone services for high-end villas, lobbies, and landmark spaces.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="mt-5 flex items-center justify-between text-xs text-navy-600">
                        <p class="font-semibold uppercase tracking-[0.26em]">
                            {{ content.services.items|length }} Core Services
                        </p>
                        <p>
                            Crafted for long-term value, not one-off projects.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const accordionContainer = document.getElementById('services-accordion');
    if (!accordionContainer) return;

    const accordionItems = accordionContainer.querySelectorAll('.service-accordion-item');
    
    accordionItems.forEach(item => {
        item.addEventListener('toggle', function() {
            // If this accordion is opening, close all others
            if (this.open) {
                accordionItems.forEach(otherItem => {
                    if (otherItem !== this && otherItem.open) {
                        otherItem.open = false;
                    }
                });
            }
        });
    });
});
</script>
