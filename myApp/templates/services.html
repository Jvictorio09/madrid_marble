{% extends "base.html" %}

{% block title %}Our Services - {{ content.nav.brand|default:"Madrid Marble" }}{% endblock %}
{% block meta_description %}Explore tailored marble services for villas, apartments, and commercial projects in the UAE — from slab selection to installation and after-care.{% endblock %}

{% block content %}
<div class="pt-24 bg-gradient-to-b from-beige-50 via-white to-beige-100/60">

    <!-- HERO: CENTERED WITH ROTATING BACKGROUND -->
    <section class="relative overflow-hidden border-b border-beige-200/60 pb-20 pt-16 md:pb-28 md:pt-24">
        <!-- Background images - rotating every 3 seconds -->
        <div class="pointer-events-none absolute inset-0">
            <!-- Image 1 - Kitchen/Marble interior -->
            <div class="bg-slide-1 absolute inset-0 opacity-0 animate-fade-slide">
                <img
                    src="https://images.unsplash.com/photo-1600585154340-0ef3c08c0632?w=1200&auto=format&fit=crop&q=80"
                    alt="Marble kitchen"
                    class="h-full w-full object-cover"
                >
            </div>
            <!-- Image 2 - Bathroom/Marble vanity -->
            <div class="bg-slide-2 absolute inset-0 opacity-0 animate-fade-slide animation-delay-3000">
                <img
                    src="https://images.unsplash.com/photo-1519710164239-da123dc03ef4?w=1200&auto=format&fit=crop&q=80"
                    alt="Marble bathroom"
                    class="h-full w-full object-cover"
                >
            </div>
            <!-- Image 3 - Staircase/Marble flooring -->
            <div class="bg-slide-3 absolute inset-0 opacity-0 animate-fade-slide animation-delay-6000">
                <img
                    src="https://images.unsplash.com/photo-1600607687920-4e2a534abf1c?w=1200&auto=format&fit=crop&q=80"
                    alt="Marble staircase"
                    class="h-full w-full object-cover"
                >
            </div>
            <!-- Overlay gradient - dark to light for better text readability -->
            <div class="absolute inset-0 bg-gradient-to-b from-navy-950/75 via-navy-900/70 to-navy-950/75"></div>
            <!-- Additional subtle blur effect -->
            <div class="absolute inset-0 backdrop-blur-[1px]"></div>
        </div>

        <style>
            @keyframes fade-slide {
                0% {
                    opacity: 0;
                }
                12% {
                    opacity: 0.4;
                }
                21% {
                    opacity: 0.4;
                }
                33% {
                    opacity: 0;
                }
                100% {
                    opacity: 0;
                }
            }
            
            .animate-fade-slide {
                animation: fade-slide 9s infinite cubic-bezier(0.25, 0.46, 0.45, 0.94);
            }
            
            .animation-delay-3000 {
                animation-delay: 3s;
            }
            
            .animation-delay-6000 {
                animation-delay: 6s;
            }
        </style>

        <div class="relative mx-auto max-w-5xl px-6 md:px-12">
            <div class="mx-auto max-w-4xl space-y-8 text-center">
                <!-- Badge -->
                {% if services_page.badge %}
                <div class="inline-flex items-center gap-2 rounded-full bg-white/10 backdrop-blur-md border border-white/20 px-5 py-2 text-xs font-medium uppercase tracking-[0.22em] text-white/90 shadow-lg">
                    <span class="h-1.5 w-1.5 rounded-full bg-white/60"></span>
                    {{ services_page.badge }}
                </div>
                {% else %}
                <div class="inline-flex items-center gap-2 rounded-full bg-white/10 backdrop-blur-md border border-white/20 px-5 py-2 text-xs font-medium uppercase tracking-[0.22em] text-white/90 shadow-lg">
                    <span class="h-1.5 w-1.5 rounded-full bg-white/60"></span>
                    Dubai • Marble Supply • Fit-Out • After-Care
                </div>
                {% endif %}

                <!-- Main heading and description -->
                <div class="space-y-6">
                    <h1 class="text-balance text-4xl font-medium tracking-tight text-white sm:text-5xl md:text-6xl lg:text-7xl leading-[1.1]" style="text-shadow: 0 2px 8px rgba(0,0,0,0.3);">
                        {{ services_page.title|default:"Made-to-Measure Marble for Homes, Villas & Commercial Spaces." }}
                    </h1>
                    <p class="text-lg leading-relaxed text-white/95 md:text-xl lg:text-2xl max-w-3xl mx-auto" style="text-shadow: 0 1px 4px rgba(0,0,0,0.25);">
                        {% if services_page.description %}
                            {{ services_page.description }}
                        {% else %}
                            {% with brand=content.nav.brand|default:"Madrid Marble" %}
                                {{ brand }} is a specialist marble partner for designers, contractors, and homeowners in the UAE — from choosing the right stone to the final polish on-site.
                            {% endwith %}
                        {% endif %}
                    </p>
                </div>

                <!-- Pill features - centered -->
                <div class="grid gap-4 text-sm text-white md:grid-cols-3 max-w-4xl mx-auto">
                    <div class="flex flex-col items-center gap-3 rounded-2xl bg-white/10 backdrop-blur-md px-4 py-4 ring-1 ring-white/20">
                        <span class="flex h-12 w-12 items-center justify-center rounded-full bg-white/20 backdrop-blur-sm text-lg text-white">
                            <i class="fa-solid fa-ruler-combined"></i>
                        </span>
                        <div class="space-y-1 text-center">
                            <p class="text-[0.7rem] font-semibold uppercase tracking-[0.2em] text-white">Cut-to-size</p>
                            <p class="text-[0.78rem] text-white/90">Kitchen tops, stairs, and feature pieces tailored to your drawings.</p>
                        </div>
                    </div>
                    <div class="flex flex-col items-center gap-3 rounded-2xl bg-white/10 backdrop-blur-md px-4 py-4 ring-1 ring-white/20">
                        <span class="flex h-12 w-12 items-center justify-center rounded-full bg-white/20 backdrop-blur-sm text-lg text-white">
                            <i class="fa-solid fa-helmet-safety"></i>
                        </span>
                        <div class="space-y-1 text-center">
                            <p class="text-[0.7rem] font-semibold uppercase tracking-[0.2em] text-white">Built for site</p>
                            <p class="text-[0.78rem] text-white/90">Details that work with real contractors, timelines, and site constraints.</p>
                        </div>
                    </div>
                    <div class="flex flex-col items-center gap-3 rounded-2xl bg-white/10 backdrop-blur-md px-4 py-4 ring-1 ring-white/20">
                        <span class="flex h-12 w-12 items-center justify-center rounded-full bg-white/20 backdrop-blur-sm text-lg text-white">
                            <i class="fa-solid fa-handshake-angle"></i>
                        </span>
                        <div class="space-y-1 text-center">
                            <p class="text-[0.7rem] font-semibold uppercase tracking-[0.2em] text-white">One team</p>
                            <p class="text-[0.78rem] text-white/90">From sample selection to handover, you speak to one dedicated team.</p>
                        </div>
                    </div>
                </div>

                <!-- CTA row - centered -->
                <div class="space-y-4 pt-4">
                    <div class="flex flex-wrap items-center justify-center gap-3">
                        <a href="#kitchen-marble-work"
                           class="inline-flex items-center justify-center rounded-full bg-white px-7 py-3 text-[0.7rem] font-semibold uppercase tracking-[0.26em] text-navy-900 hover:bg-white/90 hover:shadow-lg hover:shadow-white/20 transition">
                            Browse Services
                            <span class="ml-2 text-[0.9em]">
                                <i class="fa-solid fa-arrow-down-long"></i>
                            </span>
                        </a>
                        <a href="/contact/"
                           class="inline-flex items-center justify-center rounded-full border border-white/30 bg-white/10 backdrop-blur-md px-7 py-3 text-[0.7rem] font-semibold uppercase tracking-[0.26em] text-white hover:bg-white/20 hover:border-white/50 transition">
                            Send Your Drawings
                        </a>
                    </div>
                    <p class="text-[0.78rem] text-white/80 max-w-2xl mx-auto">
                        Share floor plans, countertop sizes, or a simple moodboard — we'll reply with options.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- FULL MARBLE SOLUTIONS TEXT BAND -->
    {% if services_page.solutions_title or services_page.solutions_description %}
    <section class="bg-white py-20">
        <div class="mx-auto max-w-6xl px-6 md:px-12">
            <div class="mx-auto max-w-4xl space-y-5 text-center">
                <p class="text-xs font-semibold uppercase tracking-[0.22em] text-beige-700">End-to-end project support</p>
                <h2 class="text-3xl font-semibold text-navy-900 md:text-4xl">
                    {{ services_page.solutions_title|default:"Full Marble Solutions, Not Just Slabs." }}
                </h2>
                <p class="text-lg leading-relaxed text-navy-700 md:text-xl">
                    {% if services_page.solutions_description %}
                        {{ services_page.solutions_description }}
                    {% else %}
                        {% with brand=content.nav.brand|default:"Madrid Marble" %}
                            From your first moodboard to the final on-site polish, {{ brand }} stays with your project at every stage — helping you choose the right stone, avoid detailing pitfalls, and deliver a finished space that actually feels like the renders.
                        {% endwith %}
                    {% endif %}
                </p>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- SERVICE SECTIONS (Dynamic from database) -->
    {% if services_page %}
        {% for service in services_page.services.all %}
        <section id="{{ service.service_id }}" class="{% cycle 'bg-beige-50/70' 'bg-white' %} py-20 md:py-24">
            <div class="mx-auto max-w-6xl px-6 md:px-12">
                <div class="grid gap-12 lg:grid-cols-2 lg:items-center">
                    {% if service.image_position == 'left' and service.image_url %}
                    <!-- Image first (left) -->
                    <div class="lg:order-1">
                        <div class="relative">
                            <div class="pointer-events-none absolute -left-6 -top-6 h-24 w-24 rounded-full bg-gradient-to-br from-beige-200/70 via-transparent to-transparent blur-xl"></div>
                            <div class="overflow-hidden rounded-3xl border border-beige-200/80 bg-white/90 p-3 shadow-[0_22px_70px_rgba(15,23,42,0.16)]">
                                <div class="aspect-[4/3] overflow-hidden rounded-2xl">
                                    <img
                                        src="{{ service.image_url }}"
                                        alt="{{ service.image_alt|default:service.title }}"
                                        class="h-full w-full object-cover transition duration-700 hover:scale-105"
                                    >
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}

                    <!-- Text -->
                    <div class="{% if service.image_position == 'left' %}lg:order-2{% endif %}">
                        <div class="mb-6 flex items-start gap-4">
                            <div class="flex h-14 w-14 items-center justify-center rounded-2xl bg-gradient-to-br from-navy-900 via-navy-800 to-beige-700 text-2xl text-white shadow-lg shadow-navy-900/30">
                                <i class="{{ service.icon|default:'fa-solid fa-star-of-life' }}"></i>
                            </div>
                            <div class="space-y-1">
                                <p class="text-[0.7rem] font-semibold uppercase tracking-[0.24em] text-beige-700">
                                    Service {{ forloop.counter|stringformat:"02d" }}
                                </p>
                                <h2 class="text-2xl font-semibold text-navy-900 md:text-3xl">
                                    {{ service.title }}
                                </h2>
                            </div>
                        </div>

                        {% if service.features_json %}
                        <ul class="mb-6 space-y-3 text-sm text-navy-800 md:text-[0.95rem]">
                            {% for feature in service.features_json %}
                            <li class="flex items-start gap-3">
                                <span class="mt-[3px] flex h-5 w-5 items-center justify-center rounded-full bg-navy-900 text-[0.65rem] text-white">
                                    <i class="fa-solid fa-check"></i>
                                </span>
                                <span>{{ feature }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                        
                        <p class="mb-4 text-base leading-relaxed text-navy-700 md:text-lg">
                            {{ service.description }}
                        </p>
                        
                        {% if service.additional_text %}
                        <div class="mb-5 rounded-2xl bg-white/80 px-4 py-3 text-xs text-navy-600 ring-1 ring-beige-200/80">
                            {{ service.additional_text }}
                        </div>
                        {% endif %}

                        <div class="flex flex-wrap items-center gap-3 pt-1">
                            <a href="/contact/?service={{ service.service_id }}"
                               class="inline-flex items-center justify-center rounded-full bg-navy-900 px-5 py-2.5 text-[0.7rem] font-semibold uppercase tracking-[0.24em] text-white hover:bg-navy-950 hover:shadow-lg hover:shadow-navy-900/25 transition">
                                Discuss This Service
                                <span class="ml-2 text-[0.9em]">
                                    <i class="fa-solid fa-comments"></i>
                                </span>
                            </a>
                            <p class="text-xs text-navy-600 max-w-md">
                                Mention “{{ service.title }}” and share photos or plans — we’ll respond with options and pricing guidance.
                            </p>
                        </div>
                    </div>

                    {% if service.image_position == 'right' and service.image_url %}
                    <!-- Image second (right) -->
                    <div class="lg:pl-6">
                        <div class="relative">
                            <div class="pointer-events-none absolute -right-4 -top-6 h-24 w-24 rounded-full bg-gradient-to-tr from-navy-900/20 via-transparent to-transparent blur-xl"></div>
                            <div class="overflow-hidden rounded-3xl border border-beige-200/80 bg-white/90 p-3 shadow-[0_22px_70px_rgba(15,23,42,0.16)]">
                                <div class="aspect-[4/3] overflow-hidden rounded-2xl">
                                    <img
                                        src="{{ service.image_url }}"
                                        alt="{{ service.image_alt|default:service.title }}"
                                        class="h-full w-full object-cover transition duration-700 hover:scale-105"
                                    >
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </section>
        {% endfor %}
    {% else %}
        <!-- Fallback content if no services page data -->
        <section id="kitchen-marble-work" class="bg-beige-50 py-24">
            <div class="mx-auto max-w-6xl px-6 md:px-12">
                <div class="grid gap-12 lg:grid-cols-2 lg:items-center">
                    <div>
                        <div class="mb-5 flex h-14 w-14 items-center justify-center rounded-xl bg-navy-900 text-2xl text-white">
                            <i class="fa-solid fa-utensils"></i>
                        </div>
                        <h2 class="mb-4 text-3xl font-semibold text-navy-900 md:text-4xl">Kitchen Marble Work</h2>
                        <p class="text-base text-navy-600 md:text-lg">Please seed the services page data first.</p>
                    </div>
                </div>
            </div>
        </section>
    {% endif %}

    <!-- PROCESS STRIP -->
    {% if services_page.process_title or services_page.process_steps.all %}
    <section class="bg-gradient-to-r from-beige-100 via-white to-beige-100 py-20">
        <div class="mx-auto max-w-6xl px-6 md:px-12">
            <div class="mx-auto mb-12 max-w-3xl text-center">
                <p class="text-xs font-semibold uppercase tracking-[0.22em] text-beige-700">Project journey</p>
                <h2 class="mt-2 text-2xl font-semibold text-navy-900 md:text-3xl">
                    {{ services_page.process_title|default:"A Straightforward Process, Even for Complex Projects." }}
                </h2>
                {% if services_page.process_description %}
                <p class="mt-4 text-sm text-navy-600 md:text-base">
                    {{ services_page.process_description }}
                </p>
                {% else %}
                <p class="mt-4 text-sm text-navy-600 md:text-base">
                    We simplify decisions, keep communication clear, and make sure marble is one of the least stressful parts of your build.
                </p>
                {% endif %}
            </div>

            <div class="relative">
                <!-- horizontal connector line on desktop -->
                <div class="pointer-events-none absolute inset-x-10 top-9 hidden h-px bg-gradient-to-r from-beige-200 via-beige-300 to-beige-200 md:block"></div>

                <div class="grid gap-6 md:grid-cols-4">
                    {% for step in services_page.process_steps.all %}
                    <div class="relative space-y-3 rounded-2xl border border-beige-200/80 bg-white/95 p-5 text-center shadow-sm">
                        <div class="mx-auto flex h-10 w-10 items-center justify-center rounded-full bg-navy-900 text-xs font-semibold uppercase tracking-[0.18em] text-white shadow-md">
                            {{ step.number|default:forloop.counter }}
                        </div>
                        <p class="text-sm font-semibold text-navy-900">{{ step.title }}</p>
                        <p class="text-xs text-navy-600">{{ step.description }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <div class="mt-10 flex flex-col items-center gap-3 text-center">
                <p class="text-sm text-navy-700">
                    Ready to start? Share your project details and we’ll recommend the right service mix.
                </p>
                <a href="/contact/"
                   class="inline-flex items-center justify-center rounded-full bg-navy-900 px-6 py-2.5 text-[0.7rem] font-semibold uppercase tracking-[0.24em] text-white hover:bg-navy-950 hover:shadow-lg hover:shadow-navy-900/25 transition">
                    Talk to the Madrid Marble Team
                    <span class="ml-2 text-[0.9em]">
                        <i class="fa-solid fa-arrow-up-right-from-square"></i>
                    </span>
                </a>
            </div>
        </div>
    </section>
    {% endif %}

</div>
{% endblock %}
