{% extends "base.html" %}

{% block title %}Our Services - {{ content.nav.brand|default:"Madrid Marble" }}{% endblock %}
{% block meta_description %}Explore our comprehensive marble services including slabs, cut-to-size, finishing, and installation in the UAE.{% endblock %}

{% block content %}
<div class="pt-24">

    <!-- HERO: FULL MARBLE SOLUTIONS -->
    <section class="bg-gradient-to-b from-beige-50 via-white to-white">
        <div class="mx-auto max-w-6xl px-6 pb-20 pt-16 md:px-12 md:pb-24 md:pt-20">
            <div class="grid gap-12 lg:grid-cols-[1.25fr_1fr] lg:items-center">
                <!-- Left: hero copy -->
                <div class="space-y-7">
                    {% if services_page.badge %}
                    <div class="inline-flex items-center gap-2 rounded-full bg-white px-4 py-1 text-xs font-semibold uppercase tracking-[0.22em] text-navy-700 shadow-sm">
                        <span class="h-1.5 w-1.5 rounded-full bg-beige-400"></span>
                        {{ services_page.badge }}
                    </div>
                    {% else %}
                    <div class="inline-flex items-center gap-2 rounded-full bg-white px-4 py-1 text-xs font-semibold uppercase tracking-[0.22em] text-navy-700 shadow-sm">
                        <span class="h-1.5 w-1.5 rounded-full bg-beige-400"></span>
                        Our Services
                    </div>
                    {% endif %}

                    <div class="space-y-4">
                        <h1 class="text-balance text-3xl font-semibold tracking-tight text-navy-900 sm:text-4xl md:text-5xl">
                            {{ services_page.title|default:"Full Marble Solutions for Modern Spaces." }}
                        </h1>
                        <p class="text-lg leading-relaxed text-navy-700 md:text-xl">
                            {{ services_page.description|default:"From a single kitchen to full villa interiors and commercial fit-outs, Madrid Marble handles stone selection, technical planning, fabrication, installation, and after-care — all under one specialist team." }}
                        </p>
                    </div>

                    <p class="text-sm text-navy-600 md:text-base">
                        We support homeowners, designers, and contractors with services that balance aesthetics, durability, and realistic site conditions.
                    </p>

                    <!-- CTA row -->
                    <div class="flex flex-wrap gap-3 pt-2">
                        <a href="#services-overview"
                           class="inline-flex items-center justify-center rounded-full bg-navy-900 px-7 py-3 text-xs font-semibold uppercase tracking-[0.24em] text-white hover:bg-navy-950 hover:shadow-lg transition">
                            View All Services
                        </a>
                        <a href="/contact/"
                           class="inline-flex items-center justify-center rounded-full border border-navy-900/20 bg-white px-7 py-3 text-xs font-semibold uppercase tracking-[0.24em] text-navy-900 hover:border-navy-900 hover:bg-beige-50 transition">
                            Request a Quotation
                        </a>
                    </div>
                </div>

                <!-- Right: hero collage with images -->
                <div class="lg:pl-6">
                    <div class="grid gap-4 sm:grid-cols-[1.2fr_0.9fr]">
                        <!-- Main image -->
                        {% if services_page.hero_image_1_url %}
                        <div class="overflow-hidden rounded-3xl border border-beige-200/80 bg-beige-50 shadow-[0_18px_60px_rgba(15,23,42,0.18)]">
                            <div class="aspect-[4/5]">
                                <img
                                    src="{{ services_page.hero_image_1_url }}"
                                    alt="{{ services_page.hero_image_1_alt|default:'Marble kitchen island and dining space' }}"
                                    class="h-full w-full object-cover"
                                >
                            </div>
                        </div>
                        {% else %}
                        <div class="overflow-hidden rounded-3xl border border-beige-200/80 bg-beige-50 shadow-[0_18px_60px_rgba(15,23,42,0.18)]">
                            <div class="aspect-[4/5]">
                                <img
                                    src="https://images.unsplash.com/photo-1600585154340-0ef3c08c0632?w=1200&auto=format&fit=crop"
                                    alt="Marble kitchen island and dining space"
                                    class="h-full w-full object-cover"
                                >
                            </div>
                        </div>
                        {% endif %}

                        <!-- Stacked images -->
                        <div class="flex flex-col gap-4">
                            {% if services_page.hero_image_2_url %}
                            <div class="overflow-hidden rounded-2xl border border-beige-200/80 bg-beige-50">
                                <div class="aspect-[4/3]">
                                    <img
                                        src="{{ services_page.hero_image_2_url }}"
                                        alt="{{ services_page.hero_image_2_alt|default:'Marble bathroom vanity' }}"
                                        class="h-full w-full object-cover"
                                    >
                                </div>
                            </div>
                            {% else %}
                            <div class="overflow-hidden rounded-2xl border border-beige-200/80 bg-beige-50">
                                <div class="aspect-[4/3]">
                                    <img
                                        src="https://images.unsplash.com/photo-1519710164239-da123dc03ef4?w=900&auto=format&fit=crop"
                                        alt="Marble bathroom vanity"
                                        class="h-full w-full object-cover"
                                    >
                                </div>
                            </div>
                            {% endif %}
                            
                            {% if services_page.hero_image_3_url %}
                            <div class="overflow-hidden rounded-2xl border border-beige-200/80 bg-beige-50">
                                <div class="aspect-[4/3]">
                                    <img
                                        src="{{ services_page.hero_image_3_url }}"
                                        alt="{{ services_page.hero_image_3_alt|default:'Marble staircase and flooring' }}"
                                        class="h-full w-full object-cover"
                                    >
                                </div>
                            </div>
                            {% else %}
                            <div class="overflow-hidden rounded-2xl border border-beige-200/80 bg-beige-50">
                                <div class="aspect-[4/3]">
                                    <img
                                        src="https://images.unsplash.com/photo-1600607687920-4e2a534abf1c?w=900&auto=format&fit=crop"
                                        alt="Marble staircase and flooring"
                                        class="h-full w-full object-cover"
                                    >
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Floating label -->
                    {% if services_page.hero_label %}
                    <div class="mt-4 inline-flex items-center gap-2 rounded-full bg-white px-4 py-2 text-xs font-semibold uppercase tracking-[0.22em] text-navy-800 shadow-sm">
                        <span class="h-1.5 w-1.5 rounded-full bg-navy-900"></span>
                        {{ services_page.hero_label }}
                    </div>
                    {% else %}
                    <div class="mt-4 inline-flex items-center gap-2 rounded-full bg-white px-4 py-2 text-xs font-semibold uppercase tracking-[0.22em] text-navy-800 shadow-sm">
                        <span class="h-1.5 w-1.5 rounded-full bg-navy-900"></span>
                        Kitchens • Bathrooms • Flooring • Custom Pieces
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>

    <!-- SERVICES OVERVIEW STRIP -->
    <section id="services-overview" class="border-y border-beige-200/70 bg-white">
        <div class="mx-auto max-w-6xl px-6 py-10 md:px-12">
            <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4 stagger-children">
                {% if services_page %}
                    {% for service in services_page.services.all %}
                    <a href="#{{ service.service_id }}"
                       class="group flex flex-col gap-1 rounded-2xl bg-beige-50/70 px-4 py-4 transition hover:-translate-y-0.5 hover:bg-beige-50 hover:shadow-md">
                        <p class="text-xs font-semibold uppercase tracking-[0.22em] text-beige-700">{{ service.sort_order|add:"1"|stringformat:"02d" }}</p>
                        <p class="text-sm font-semibold text-navy-900">{{ service.title }}</p>
                        <p class="text-xs text-navy-600">{{ service.description|truncatewords:12 }}</p>
                    </a>
                    {% endfor %}
                {% else %}
                    <!-- Fallback if no services page data -->
                    <a href="#kitchen-marble-work"
                       class="group flex flex-col gap-1 rounded-2xl bg-beige-50/70 px-4 py-4 transition hover:-translate-y-0.5 hover:bg-beige-50 hover:shadow-md">
                        <p class="text-xs font-semibold uppercase tracking-[0.22em] text-beige-700">01</p>
                        <p class="text-sm font-semibold text-navy-900">Kitchen Marble Work</p>
                        <p class="text-xs text-navy-600">Countertops, islands, and backsplashes designed for daily use.</p>
                    </a>
                    <a href="#bathroom-vanity"
                       class="group flex flex-col gap-1 rounded-2xl bg-beige-50/70 px-4 py-4 transition hover:-translate-y-0.5 hover:bg-beige-50 hover:shadow-md">
                        <p class="text-xs font-semibold uppercase tracking-[0.22em] text-beige-700">02</p>
                        <p class="text-sm font-semibold text-navy-900">Bathroom & Vanity</p>
                        <p class="text-xs text-navy-600">Spa-like bathrooms, vanities, and wet areas.</p>
                    </a>
                    <a href="#flooring-staircase"
                       class="group flex flex-col gap-1 rounded-2xl bg-beige-50/70 px-4 py-4 transition hover:-translate-y-0.5 hover:bg-beige-50 hover:shadow-md">
                        <p class="text-xs font-semibold uppercase tracking-[0.22em] text-beige-700">03</p>
                        <p class="text-sm font-semibold text-navy-900">Flooring & Staircase</p>
                        <p class="text-xs text-navy-600">Large-format floors, cladding, and sculptural stairs.</p>
                    </a>
                    <a href="#custom-fabrication"
                       class="group flex flex-col gap-1 rounded-2xl bg-beige-50/70 px-4 py-4 transition hover:-translate-y-0.5 hover:bg-beige-50 hover:shadow-md">
                        <p class="text-xs font-semibold uppercase tracking-[0.22em] text-beige-700">04</p>
                        <p class="text-sm font-semibold text-navy-900">Custom Fabrication</p>
                        <p class="text-xs text-navy-600">Feature walls, reception counters, and statement pieces.</p>
                    </a>
                {% endif %}
            </div>
        </div>
    </section>

    <!-- FULL MARBLE SOLUTIONS TEXT BAND -->
    {% if services_page.solutions_title or services_page.solutions_description %}
    <section class="bg-white py-20">
        <div class="mx-auto max-w-6xl px-6 md:px-12">
            <div class="mx-auto max-w-4xl text-center space-y-6">
                <h2 class="text-3xl font-semibold text-navy-900 md:text-4xl">{{ services_page.solutions_title|default:"Full Marble Solutions" }}</h2>
                <p class="text-lg leading-relaxed text-navy-700 md:text-xl">
                    {{ services_page.solutions_description|default:"Whether you're designing a new villa, upgrading a kitchen, or fitting out a commercial property, Madrid Marble provides an end-to-end solution: stone selection, technical guidance, fabrication, installation, and after-care recommendations — all managed by one specialist team." }}
                </p>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- SERVICE SECTIONS (Dynamic from database) -->
    {% if services_page %}
        {% for service in services_page.services.all %}
        <section id="{{ service.service_id }}" class="{% cycle 'bg-beige-50' 'bg-white' %} py-24">
            <div class="mx-auto max-w-6xl px-6 md:px-12">
                <div class="grid gap-12 lg:grid-cols-2 lg:items-center">
                    {% if service.image_position == 'left' %}
                    <!-- Image first (left) -->
                    {% if service.image_url %}
                    <div class="lg:order-1">
                        <div class="overflow-hidden rounded-3xl border border-beige-200/80 bg-white p-3 shadow-[0_18px_60px_rgba(15,23,42,0.12)]">
                            <div class="aspect-[4/3] overflow-hidden rounded-2xl">
                                <img
                                    src="{{ service.image_url }}"
                                    alt="{{ service.image_alt|default:service.title }}"
                                    class="h-full w-full object-cover"
                                >
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    {% endif %}

                    <!-- Text -->
                    <div class="{% if service.image_position == 'left' %}lg:order-2{% endif %}">
                        <div class="flex h-14 w-14 items-center justify-center rounded-xl bg-navy-900 text-2xl text-white mb-5">
                            <i class="{{ service.icon|default:'fa-solid fa-star' }}"></i>
                        </div>
                        <h2 class="text-3xl font-semibold text-navy-900 md:text-4xl mb-4">
                            {{ service.title }}
                        </h2>
                        
                        {% if service.features_json %}
                        <ul class="space-y-3 text-base text-navy-700 md:text-lg mb-6">
                            {% for feature in service.features_json %}
                            <li class="flex items-center gap-3">
                                <i class="fa-solid fa-check text-navy-900"></i>
                                <span>{{ feature }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                        
                        <p class="text-base leading-relaxed text-navy-700 md:text-lg mb-4">
                            {{ service.description }}
                        </p>
                        
                        {% if service.additional_text %}
                        <p class="text-sm text-navy-600">
                            {{ service.additional_text }}
                        </p>
                        {% endif %}
                    </div>

                    {% if service.image_position == 'right' %}
                    <!-- Image second (right) -->
                    {% if service.image_url %}
                    <div class="lg:pl-6">
                        <div class="overflow-hidden rounded-3xl border border-beige-200/80 bg-white p-3 shadow-[0_18px_60px_rgba(15,23,42,0.12)]">
                            <div class="aspect-[4/3] overflow-hidden rounded-2xl">
                                <img
                                    src="{{ service.image_url }}"
                                    alt="{{ service.image_alt|default:service.title }}"
                                    class="h-full w-full object-cover"
                                >
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    {% endif %}
                </div>
            </div>
        </section>
        {% endfor %}
    {% else %}
        <!-- Fallback content if no services page data -->
        <section id="kitchen-marble-work" class="bg-beige-50 py-24">
            <div class="mx-auto max-w-6xl px-6 md:px-12">
                <div class="grid gap-12 lg:grid-cols-2 lg:items-center">
                    <div>
                        <div class="flex h-14 w-14 items-center justify-center rounded-xl bg-navy-900 text-2xl text-white mb-5">
                            <i class="fa-solid fa-utensils"></i>
                        </div>
                        <h2 class="text-3xl font-semibold text-navy-900 md:text-4xl mb-4">Kitchen Marble Work</h2>
                        <p class="text-base text-navy-600 md:text-lg">Please seed the services page data first.</p>
                    </div>
                </div>
            </div>
        </section>
    {% endif %}

    <!-- PROCESS STRIP -->
    {% if services_page.process_title or services_page.process_steps.all %}
    <section class="bg-beige-50 py-20">
        <div class="mx-auto max-w-6xl px-6 md:px-12">
            <div class="mx-auto mb-10 max-w-3xl text-center">
                <h2 class="text-2xl font-semibold text-navy-900 md:text-3xl">
                    {{ services_page.process_title|default:"How We Work" }}
                </h2>
                {% if services_page.process_description %}
                <p class="mt-3 text-base text-navy-600 md:text-lg">
                    {{ services_page.process_description }}
                </p>
                {% endif %}
            </div>

            <div class="grid gap-6 md:grid-cols-4 stagger-children">
                {% for step in services_page.process_steps.all %}
                <div class="space-y-2 rounded-2xl border border-beige-200/80 bg-white p-5 text-center">
                    <p class="text-xs font-semibold uppercase tracking-[0.22em] text-beige-700">{{ step.number }}</p>
                    <p class="text-sm font-semibold text-navy-900">{{ step.title }}</p>
                    <p class="text-xs text-navy-600">{{ step.description }}</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}

</div>
{% endblock %}
