<header class="absolute inset-x-0 top-0 z-20 bg-white/95 backdrop-blur-md border-b border-beige-200/50">
    <div class="mx-auto flex max-w-7xl items-center justify-between px-6 py-6 text-navy-900 md:px-12">
        <a href="{% url 'home' %}" class="flex items-center gap-3">
            {% if content.nav.logo_image_url %}
            <img src="{{ content.nav.logo_image_url }}" alt="{{ content.nav.brand|default:'Madrid Marble' }}" class="h-10 w-auto object-contain">
            {% else %}
            <span class="flex h-10 w-10 items-center justify-center rounded-full bg-navy-900 text-white font-semibold">{{ content.nav.logo_text|default:"MM" }}</span>
            {% endif %}
            <span class="text-lg font-semibold tracking-wide hidden sm:inline text-navy-900">{{ content.nav.brand|default:"Madrid Marble" }}</span>
        </a>
        <nav class="hidden items-center gap-6 text-sm font-medium uppercase tracking-[0.2em] text-navy-700 lg:flex xl:gap-8">
            {% if content.nav.links and content.nav.links|length > 0 %}
                {% for link in content.nav.links %}
                {% if link.href == '#portfolio' or link.href == '/portfolio/' or 'portfolio' in link.href|lower %}
                {# Skip portfolio links #}
                {% elif link.href == '#about' or link.href == '/about/' %}
                <a href="{% url 'about' %}" class="relative transition-colors duration-200 hover:text-navy-900 {% if request.resolver_match.url_name == 'about' %}text-navy-900{% endif %}">
                    <span class="relative z-10">{{ link.label }}</span>
                    {% if request.resolver_match.url_name == 'about' %}
                    <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-navy-900"></span>
                    {% endif %}
                </a>
                {% elif link.href == '#services' or link.href == '/services/' %}
                <a href="{% url 'services' %}" class="relative transition-colors duration-200 hover:text-navy-900 {% if request.resolver_match.url_name == 'services' %}text-navy-900{% endif %}">
                    <span class="relative z-10">{{ link.label }}</span>
                    {% if request.resolver_match.url_name == 'services' %}
                    <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-navy-900"></span>
                    {% endif %}
                </a>
                {% elif link.href == '#faq' or link.href == '/faq/' %}
                <a href="{% url 'faq' %}" class="relative transition-colors duration-200 hover:text-navy-900 {% if request.resolver_match.url_name == 'faq' %}text-navy-900{% endif %}">
                    <span class="relative z-10">{{ link.label }}</span>
                    {% if request.resolver_match.url_name == 'faq' %}
                    <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-navy-900"></span>
                    {% endif %}
                </a>
                {% elif link.href == '#contact' or link.href == '/contact/' %}
                <a href="{% url 'contact' %}" class="relative transition-colors duration-200 hover:text-navy-900 {% if request.resolver_match.url_name == 'contact' %}text-navy-900{% endif %}">
                    <span class="relative z-10">{{ link.label }}</span>
                    {% if request.resolver_match.url_name == 'contact' %}
                    <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-navy-900"></span>
                    {% endif %}
                </a>
                {% elif link.href == '#' or link.href == '/' or link.href == '' %}
                <a href="{% url 'home' %}" class="relative transition-colors duration-200 hover:text-navy-900 {% if request.resolver_match.url_name == 'home' %}text-navy-900{% endif %}">
                    <span class="relative z-10">{{ link.label }}</span>
                    {% if request.resolver_match.url_name == 'home' %}
                    <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-navy-900"></span>
                    {% endif %}
                </a>
                {% else %}
                <a href="{{ link.href }}" class="relative transition-colors duration-200 hover:text-navy-900">
                    <span class="relative z-10">{{ link.label }}</span>
                </a>
                {% endif %}
                {% endfor %}
                {# Always show essential links if configured links exist #}
                <a href="{% url 'about' %}" class="relative transition-colors duration-200 hover:text-navy-900 {% if request.resolver_match.url_name == 'about' %}text-navy-900{% endif %}">
                    <span class="relative z-10">About</span>
                    {% if request.resolver_match.url_name == 'about' %}
                    <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-navy-900"></span>
                    {% endif %}
                </a>
                <a href="{% url 'faq' %}" class="relative transition-colors duration-200 hover:text-navy-900 {% if request.resolver_match.url_name == 'faq' %}text-navy-900{% endif %}">
                    <span class="relative z-10">FAQ</span>
                    {% if request.resolver_match.url_name == 'faq' %}
                    <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-navy-900"></span>
                    {% endif %}
                </a>
            {% else %}
                <!-- Default navigation links if none configured -->
                <a href="{% url 'home' %}" class="relative transition-colors duration-200 hover:text-navy-900 {% if request.resolver_match.url_name == 'home' %}text-navy-900{% endif %}">
                    <span class="relative z-10">Home</span>
                    {% if request.resolver_match.url_name == 'home' %}
                    <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-navy-900"></span>
                    {% endif %}
                </a>
                <a href="{% url 'about' %}" class="relative transition-colors duration-200 hover:text-navy-900 {% if request.resolver_match.url_name == 'about' %}text-navy-900{% endif %}">
                    <span class="relative z-10">About</span>
                    {% if request.resolver_match.url_name == 'about' %}
                    <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-navy-900"></span>
                    {% endif %}
                </a>
                <a href="{% url 'services' %}" class="relative transition-colors duration-200 hover:text-navy-900 {% if request.resolver_match.url_name == 'services' %}text-navy-900{% endif %}">
                    <span class="relative z-10">Services</span>
                    {% if request.resolver_match.url_name == 'services' %}
                    <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-navy-900"></span>
                    {% endif %}
                </a>
                <a href="{% url 'faq' %}" class="relative transition-colors duration-200 hover:text-navy-900 {% if request.resolver_match.url_name == 'faq' %}text-navy-900{% endif %}">
                    <span class="relative z-10">FAQ</span>
                    {% if request.resolver_match.url_name == 'faq' %}
                    <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-navy-900"></span>
                    {% endif %}
                </a>
                <a href="{% url 'contact' %}" class="relative transition-colors duration-200 hover:text-navy-900 {% if request.resolver_match.url_name == 'contact' %}text-navy-900{% endif %}">
                    <span class="relative z-10">Contact</span>
                    {% if request.resolver_match.url_name == 'contact' %}
                    <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-navy-900"></span>
                    {% endif %}
                </a>
            {% endif %}
        </nav>
        <div class="flex items-center gap-4">
            {% if content.nav.cta %}
            {% if content.nav.cta.href == '#contact' or content.nav.cta.href == '/contact/' %}
            <a href="{% url 'contact' %}" class="hidden rounded-full border border-navy-900 bg-navy-900 px-6 py-2.5 text-xs font-semibold uppercase tracking-[0.2em] text-white transition-all duration-200 hover:bg-navy-950 hover:border-navy-950 hover:scale-105 lg:inline-flex items-center gap-2">{{ content.nav.cta.label }}</a>
            {% else %}
            <a href="{{ content.nav.cta.href }}" class="hidden rounded-full border border-navy-900 bg-navy-900 px-6 py-2.5 text-xs font-semibold uppercase tracking-[0.2em] text-white transition-all duration-200 hover:bg-navy-950 hover:border-navy-950 hover:scale-105 lg:inline-flex items-center gap-2">{{ content.nav.cta.label }}</a>
            {% endif %}
            {% endif %}
            <!-- Mobile menu button -->
            <button id="mobile-menu-button" class="flex items-center justify-center rounded-lg border border-navy-900/20 bg-navy-900/5 p-2.5 text-navy-900 transition-all duration-200 hover:bg-navy-900/10 hover:border-navy-900/30 lg:hidden" aria-label="Toggle menu">
                <i class="fa-solid fa-bars text-lg" id="menu-icon"></i>
            </button>
        </div>
    </div>
    <!-- Mobile menu -->
    <div id="mobile-menu" class="hidden border-t border-white/10 bg-navy-950/98 backdrop-blur-lg lg:hidden">
        <nav class="mx-auto max-w-7xl flex flex-col gap-1 px-6 py-4">
            {% if content.nav.links and content.nav.links|length > 0 %}
            {% for link in content.nav.links %}
                {% if link.href == '#portfolio' or link.href == '/portfolio/' or 'portfolio' in link.href|lower %}
                {# Skip portfolio links #}
                {% elif link.href == '#about' or link.href == '/about/' %}
                <a href="{% url 'about' %}" class="block rounded-lg px-4 py-3 text-sm font-medium uppercase tracking-[0.2em] text-white/80 transition-all duration-200 hover:bg-white/5 hover:text-white {% if request.resolver_match.url_name == 'about' %}bg-white/10 text-white{% endif %}">{{ link.label }}</a>
                {% elif link.href == '#services' or link.href == '/services/' %}
                <a href="{% url 'services' %}" class="block rounded-lg px-4 py-3 text-sm font-medium uppercase tracking-[0.2em] text-white/80 transition-all duration-200 hover:bg-white/5 hover:text-white {% if request.resolver_match.url_name == 'services' %}bg-white/10 text-white{% endif %}">{{ link.label }}</a>
                {% elif link.href == '#faq' or link.href == '/faq/' %}
                <a href="{% url 'faq' %}" class="block rounded-lg px-4 py-3 text-sm font-medium uppercase tracking-[0.2em] text-white/80 transition-all duration-200 hover:bg-white/5 hover:text-white {% if request.resolver_match.url_name == 'faq' %}bg-white/10 text-white{% endif %}">{{ link.label }}</a>
                {% elif link.href == '#contact' or link.href == '/contact/' %}
                <a href="{% url 'contact' %}" class="block rounded-lg px-4 py-3 text-sm font-medium uppercase tracking-[0.2em] text-white/80 transition-all duration-200 hover:bg-white/5 hover:text-white {% if request.resolver_match.url_name == 'contact' %}bg-white/10 text-white{% endif %}">{{ link.label }}</a>
                {% elif link.href == '#' or link.href == '/' or link.href == '' %}
                <a href="{% url 'home' %}" class="block rounded-lg px-4 py-3 text-sm font-medium uppercase tracking-[0.2em] text-white/80 transition-all duration-200 hover:bg-white/5 hover:text-white {% if request.resolver_match.url_name == 'home' %}bg-white/10 text-white{% endif %}">{{ link.label }}</a>
                {% else %}
                <a href="{{ link.href }}" class="block rounded-lg px-4 py-3 text-sm font-medium uppercase tracking-[0.2em] text-white/80 transition-all duration-200 hover:bg-white/5 hover:text-white">{{ link.label }}</a>
                {% endif %}
            {% endfor %}
            {# Always show essential links in mobile menu #}
            {% if content.nav.links and content.nav.links|length > 0 %}
            <a href="{% url 'about' %}" class="block rounded-lg px-4 py-3 text-sm font-medium uppercase tracking-[0.2em] text-white/80 transition-all duration-200 hover:bg-white/5 hover:text-white {% if request.resolver_match.url_name == 'about' %}bg-white/10 text-white{% endif %}">About</a>
            <a href="{% url 'faq' %}" class="block rounded-lg px-4 py-3 text-sm font-medium uppercase tracking-[0.2em] text-white/80 transition-all duration-200 hover:bg-white/5 hover:text-white {% if request.resolver_match.url_name == 'faq' %}bg-white/10 text-white{% endif %}">FAQ</a>
            {% endif %}
            {% else %}
                <!-- Default navigation links if none configured -->
                <a href="{% url 'home' %}" class="block rounded-lg px-4 py-3 text-sm font-medium uppercase tracking-[0.2em] text-white/80 transition-all duration-200 hover:bg-white/5 hover:text-white {% if request.resolver_match.url_name == 'home' %}bg-white/10 text-white{% endif %}">Home</a>
                <a href="{% url 'about' %}" class="block rounded-lg px-4 py-3 text-sm font-medium uppercase tracking-[0.2em] text-white/80 transition-all duration-200 hover:bg-white/5 hover:text-white {% if request.resolver_match.url_name == 'about' %}bg-white/10 text-white{% endif %}">About</a>
                <a href="{% url 'services' %}" class="block rounded-lg px-4 py-3 text-sm font-medium uppercase tracking-[0.2em] text-white/80 transition-all duration-200 hover:bg-white/5 hover:text-white {% if request.resolver_match.url_name == 'services' %}bg-white/10 text-white{% endif %}">Services</a>
                <a href="{% url 'faq' %}" class="block rounded-lg px-4 py-3 text-sm font-medium uppercase tracking-[0.2em] text-white/80 transition-all duration-200 hover:bg-white/5 hover:text-white {% if request.resolver_match.url_name == 'faq' %}bg-white/10 text-white{% endif %}">FAQ</a>
                <a href="{% url 'contact' %}" class="block rounded-lg px-4 py-3 text-sm font-medium uppercase tracking-[0.2em] text-white/80 transition-all duration-200 hover:bg-white/5 hover:text-white {% if request.resolver_match.url_name == 'contact' %}bg-white/10 text-white{% endif %}">Contact</a>
            {% endif %}
            {% if content.nav.cta %}
            {% if content.nav.cta.href == '#contact' or content.nav.cta.href == '/contact/' %}
            <a href="{% url 'contact' %}" class="mt-4 block rounded-full border border-white/30 bg-white/5 px-6 py-3 text-center text-xs font-semibold uppercase tracking-[0.2em] text-white transition-all duration-200 hover:bg-white/10 hover:border-white/50">{{ content.nav.cta.label }}</a>
            {% else %}
            <a href="{{ content.nav.cta.href }}" class="mt-4 block rounded-full border border-white/30 bg-white/5 px-6 py-3 text-center text-xs font-semibold uppercase tracking-[0.2em] text-white transition-all duration-200 hover:bg-white/10 hover:border-white/50">{{ content.nav.cta.label }}</a>
            {% endif %}
            {% endif %}
        </nav>
    </div>
</header>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const menuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIcon = document.getElementById('menu-icon');
    
    if (menuButton && mobileMenu) {
        menuButton.addEventListener('click', function() {
            mobileMenu.classList.toggle('hidden');
            if (mobileMenu.classList.contains('hidden')) {
                menuIcon.classList.remove('fa-times');
                menuIcon.classList.add('fa-bars');
            } else {
                menuIcon.classList.remove('fa-bars');
                menuIcon.classList.add('fa-times');
            }
        });
    }
});
</script>


